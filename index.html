<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <title>Che personaggio sei?</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: Arial, Helvetica, sans-serif; text-align:center; background:#f4f4f4; padding:20px; }
    h1 { margin-bottom:12px; }
    #game { max-width:760px; margin:0 auto; }
    #question { font-weight:600; margin-bottom:10px; }

    .choices { display:flex; justify-content:center; gap:18px; flex-wrap:wrap; margin-top:8px; }
    .choice {
      border:0; background:#fff; border-radius:12px; padding:8px; width:280px; cursor:pointer;
      box-shadow:0 4px 10px rgba(0,0,0,0.06); display:flex; flex-direction:column; align-items:center;
    }
    .choice:active { transform:translateY(2px); }
    .choice img { width:230px; height:150px; object-fit:cover; border-radius:8px; display:block; }
    .label { margin-top:8px; font-weight:600; color:#222; }

    #result { display:none; margin-top:28px; }
    #characterImage { width:260px; margin-top:12px; border-radius:10px; }

    #controls { margin-top:14px; }
    button#restart { padding:8px 14px; border-radius:8px; border:0; cursor:pointer; }
    .note { color:#666; font-size:0.9rem; margin-top:6px; }
  </style>
</head>
<body>
  <h1>Che personaggio dei videogiochi sei?</h1>

  <div id="game">
    <p id="question">Domanda</p>

    <div class="choices">
      <button id="choice1Btn" class="choice" type="button">
        <img id="choice1Img" src="" alt="Scelta 1">
        <div class="label" id="choice1Label"></div>
      </button>

      <button id="choice2Btn" class="choice" type="button">
        <img id="choice2Img" src="" alt="Scelta 2">
        <div class="label" id="choice2Label"></div>
      </button>
    </div>

    <p class="note" id="progress"></p>
  </div>

  <div id="result">
    <h2>Il tuo personaggio è:</h2>
    <p id="characterName" style="font-size:1.2rem; font-weight:700"></p>
    <img id="characterImage" src="" alt="Personaggio">
    <div id="controls">
      <button id="restart">Ricomincia</button>
    </div>
  </div>

  <script>
    // DOMANDE (labels visibili + valori interni + percorsi immagini placeholders)
    const questions = [
      { text: "Giorno o Notte?", options: ["giorno","notte"], labels:["Giorno","Notte"], images:["grafiche/giorno.jpg","grafiche/notte.jpg"] },
      { text: "GamerGirl o GamerBoy?", options: ["gamergirl","gamerboy"], labels:["GamerGirl","GamerBoy"], images:["grafiche/gamergirl.jpg","grafiche/gamerboy.jpg"] },
      { text: "Modern games o Retro games?", options: ["modern","retro"], labels:["Modern games","Retro games"], images:["grafiche/modern.jpg","grafiche/retro.jpg"] },
      { text: "Chaos o Ordine?", options: ["chaos","ordine"], labels:["Chaos","Ordine"], images:["grafiche/chaos.jpg","grafiche/ordine.jpg"] },
      { text: "Mare o Montagna?", options: ["mare","montagna"], labels:["Mare","Montagna"], images:["grafiche/mare.jpg","grafiche/montagna.jpg"] },
      { text: "Chilling o Platino?", options: ["chilling","platino"], labels:["Chilling","Platino"], images:["grafiche/chilling.jpg","grafiche/platino.jpg"] }
    ];

    // mappa punti per ogni risposta
    const mapping = {
      "giorno":    ["mario","pikachu"],
      "notte":     ["link","lara"],
      "gamergirl": ["mario","link"],
      "gamerboy":  ["pikachu","lara"],
      "modern":    ["mario","lara"],
      "retro":     ["pikachu","link"],
      "chaos":     ["mario","pikachu"],
      "ordine":    ["link","lara"],
      "mare":      ["pikachu","link"],
      "montagna":  ["mario","lara"],
      "chilling":  ["mario","link"],
      "platino":   ["pikachu","lara"]
    };

    // immagini finali (sostituisci con i tuoi percorsi)
    const finalImages = {
      mario:   "grafiche/mario.jpg",
      pikachu: "grafiche/pikachu.jpg",
      link:    "grafiche/link.jpg",
      lara:    "grafiche/lara croft.jpg"
    };

    const finalNames = {
      mario: "Super Mario",
      pikachu: "Pikachu",
      link: "Link",
      lara: "Lara Croft"
    };

    let scores = { mario:0, pikachu:0, link:0, lara:0 };
    let currentQuestion = 0;

    const qEl = document.getElementById("question");
    const c1Img = document.getElementById("choice1Img");
    const c2Img = document.getElementById("choice2Img");
    const c1Label = document.getElementById("choice1Label");
    const c2Label = document.getElementById("choice2Label");
    const c1Btn = document.getElementById("choice1Btn");
    const c2Btn = document.getElementById("choice2Btn");
    const progressEl = document.getElementById("progress");
    const resultEl = document.getElementById("result");
    const gameEl = document.getElementById("game");
    const charNameEl = document.getElementById("characterName");
    const charImgEl = document.getElementById("characterImage");
    const restartBtn = document.getElementById("restart");

    // selezione dell'opzione (viene chiamata dai bottoni)
    function selectChoice(choiceIndex) {
      const q = questions[currentQuestion];
      const answer = q.options[choiceIndex];
      console.log(`Q${currentQuestion+1} -> ${answer}`);

      if (mapping[answer]) {
        mapping[answer].forEach(p => scores[p]++);
      }

      currentQuestion++;
      if (currentQuestion < questions.length) {
        loadQuestion();
      } else {
        showResult();
      }
    }

    // carica la domanda corrente e aggiorna immagini/etichette
    function loadQuestion() {
      const q = questions[currentQuestion];
      qEl.textContent = `Domanda ${currentQuestion + 1} di ${questions.length}: ${q.text}`;

      // imposta immagini (sostituisci i percorsi con le tue immagini reali)
      c1Img.src = q.images[0];
      c1Img.alt = q.labels[0];
      c1Label.textContent = q.labels[0];
      c1Img.style.display = "block";

      c2Img.src = q.images[1];
      c2Img.alt = q.labels[1];
      c2Label.textContent = q.labels[1];
      c2Img.style.display = "block";

      progressEl.textContent = "";

      // assicuriamoci che i bottoni siano collegati (sovrascrive eventuali handler precedenti)
      c1Btn.onclick = () => selectChoice(0);
      c2Btn.onclick = () => selectChoice(1);

      // se l'immagine non si carica, nascondila (così si vede comunque l'etichetta)
      c1Img.onerror = function() { this.style.display = "none"; };
      c2Img.onerror = function() { this.style.display = "none"; };
    }

    // determina il vincitore (tie-break con priorità fissa)
    function determineWinner(scoresObj) {
      const max = Math.max(...Object.values(scoresObj));
      const winners = Object.keys(scoresObj).filter(k => scoresObj[k] === max);
      if (winners.length === 1) return winners[0];
      // priorità in caso di pareggio: Mario -> Pikachu -> Link -> Lara
      const priority = ["mario","pikachu","link","lara"];
      return priority.find(p => winners.includes(p));
    }

    function showResult() {
      gameEl.style.display = "none";
      resultEl.style.display = "block";

      const winnerKey = determineWinner(scores);
      charNameEl.textContent = finalNames[winnerKey] || "Personaggio";
      charImgEl.src = finalImages[winnerKey];
      charImgEl.alt = finalNames[winnerKey];
    }

    restartBtn.onclick = function() {
      // reset e ricomincia
      scores = { mario:0, pikachu:0, link:0, lara:0 };
      currentQuestion = 0;
      resultEl.style.display = "none";
      gameEl.style.display = "block";
      loadQuestion();
    };

    // Inizio
    loadQuestion();
  </script>
</body>
</html>




